###########################
##   Graph Communities   ##
###########################

echo "------ Community Grapher ------"
path="$1"
mkdir -p output

if [ -z "$path" ]; then
	echo "Please enter number of variables:"
	read vars
	echo "Please enter number of clauses:"
	read clauses
	echo "Please enter number of communities:"
	read cmtys
	echo "Please enter quality of communities:"
	read q

	echo -n "Generating dimacs file"
	progress_bar &
	pid=$!
	
	../Haskell/Cmty $vars $clauses $cmtys $q > output/community.dimacs
	path="output/community.dimacs"
	
	stop_progress $pid
fi

if [ -z "$2" ]; then
  echo "To use GraphViz enter graphviz or to use UbiGraph enter ubigraph:"
  read graph
else
  graph="$2"
fi
if [ $graph == "graphviz" ]; then
  if [ -z "$3" ]; then
    echo "Do you want to generate the graph slowly but with more detail? (Y/n)"
    read detail
  else
    detail="$3"
  fi
  if [ -z "$3" ]; then
    echo "Enter an output file format (ex: pdf(default), scg, jpg):"
    read output_format
  else
    output_format="$4"
  fi
  
fi

./Helpers/graphHelper.rb $path $graph $detail grapher $path $output_format
